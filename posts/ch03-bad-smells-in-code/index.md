# 3. 코드에서 나는 악취(Bad Smells in Code)

- 리팩터링, 언제 시작하고 언제 그만두면 좋을까? 자신의 직관을 믿어라.
- 리팩터링을 이야기 할 때 냄새(smell)를 자주 사용한다. 켄트백의 일화에서 출발했다.

## 3.1 기이한 이름(Mysterious Name)

- 코드는 명료해야 한다. 명료함을 표현하는 가장 간단한 방법은 '이름'이다.
- 이름 작성은 물론 어렵다. 하지만 그럼에도 포기할 수 만큼 중요하다.
- **방법**
    - 함수 선언 바꾸기(6.5)
    - 변수 이름 바꾸기(6.7)
    - 필드 이름 바꾸기(9.2)

## 3.2 중복 코드(Duplicated Code)

- 중복을 하나로 통합하면 더 나은 프로그램에 다가갈 수 있다.
- **방법**
    - 함수 추출하기(6.1)
    - 문장 슬라이드하기(6.2): 비슷한 부분 한곳에 모으기
    - 메서드 올리기(12.1)

## 3.3 긴 함수(Long Function)

- 명료한 문장에서 리듬감을 느끼고 이해하기 쉽듯이, 코드도 마찬가지다.
- ? 간접 호출(indirection), 서브루틴 호출
- 함수 이름은 동작방식이 아닌 '의도'를 전달하기 위해 존재한다. 무엇을 하고 싶은가?
- **방법**
  - 함수 추출하기(6.1)
  - 임시 변수를 질의 함수로 바꾸기(7.4)
  - 매개변수 객체 만들기(6.8)
  - 객체 통째로 넘기기(11.4)
  - 함수를 명령으로 바꾸기(11.9)
  - 조건문 분해하기(10.1)
  - 조건부 로직을 다형성으로 바꾸기(10.4)
  - 반복문 쪼개기(8.7)

## 3.4 긴 매개변수 목록(Long Parameter List)

- ? 부분 적용 함수(partially appied function)
- **방법**
  - 매개변수를 질의 함수로 바꾸기(11.5)
  - 객체 통째로 넘기기(11.4)
  - 매개변수 객체 만들기(6.8)
  - 플래그 인수 제거하기(11.3)
  - 여러 함수를 클래스로 묶기(6.9)

## 3.5 전역 데이터(Global Data)

> 무엇이든 많이 복용하면 독이 될 수 있다.
> -파라겔수스(Paracelsus)

- **변수 캡슐화하기(6.6)**: 데이터를 함수로 감싸다. 오염 확률 규제.
    - ? 접근 범위를 줄이다. 접근자 함수는 클래스나 모듈에 집어넣고 안에서만 사용하는 방법을 권장한다.
- 행방불명, 수취인불명; 전역 데이터는 가장 고약한 악취다. 누가, 어떤 의도로 값을 변경했는지 조사하기 어렵다.
    - `클래스 변수`와 `싱글톤(Singleton)`에서도 같은 문제가 발생한다.
- ? 심지어 전역 데이터가 `가변(mutable)`이라면 타의 추종을 불허한다.
- **가능한, 전역 데이터를 최소화하자.  소프트웨어의 진화를 위하여.**
